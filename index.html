
 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Athena Library - Discover, Borrow, Learn</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- 1. VARIABLES & RESET --- */
        :root {
            --primary: #2563eb;       /* Modern Blue */
            --primary-dark: #1e40af;
            --secondary: #0f172a;     /* Dark Slate */
            --accent: #f59e0b;        /* Amber/Orange */
            --bg-light: #f8fafc;
            --text-dark: #334155;
            --text-light: #94a3b8;
            --white: #ffffff;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background-color: var(--bg-light); color: var(--text-dark); display: flex; flex-direction: column; min-height: 100vh; }
        a { text-decoration: none; color: inherit; transition: 0.3s; }
        ul { list-style: none; }
        
        /* --- 2. HEADER & NAVIGATION --- */
        header { background: var(--white); box-shadow: 0 2px 10px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 1000; }
        .nav-container {
            max-width: 1200px; margin: 0 auto; padding: 15px 20px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .logo { font-size: 1.8rem; font-weight: 800; color: var(--secondary); display: flex; align-items: center; gap: 10px; }
        .logo i { color: var(--primary); }

        .nav-menu { display: flex; align-items: center; gap: 30px; }
        .nav-link { font-weight: 600; color: var(--secondary); cursor: pointer; }
        .nav-link:hover, .nav-link.active { color: var(--primary); }

        .btn-auth {
            background: var(--primary); color: white; padding: 10px 25px; border-radius: 50px;
            font-weight: 600; box-shadow: 0 4px 6px rgba(37, 99, 235, 0.2); cursor: pointer;
        }
        .btn-auth:hover { background: var(--primary-dark); transform: translateY(-2px); }

        /* Mobile Menu Toggle */
        .mobile-toggle { display: none; font-size: 1.5rem; cursor: pointer; }

        /* --- 3. MAIN LAYOUT --- */
        main { flex: 1; width: 100%; }
        .page-section { display: none; animation: fadeIn 0.4s ease-out; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; }

        /* --- 4. INDEX / HOME PAGE --- */
        .hero {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.9), rgba(30, 64, 175, 0.8)), url('https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80');
            background-size: cover; background-position: center;
            color: white; padding: 120px 20px; text-align: center;
        }
        .hero h1 { font-size: 3.5rem; margin-bottom: 20px; line-height: 1.2; }
        .hero p { font-size: 1.2rem; margin-bottom: 30px; opacity: 0.9; max-width: 600px; margin-left: auto; margin-right: auto; }
        
        .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; margin-top: -50px; position: relative; z-index: 10; padding: 0 20px; }
        .feature-card {
            background: white; padding: 30px; border-radius: 12px; box-shadow: var(--shadow); text-align: center; transition: transform 0.3s;
        }
        .feature-card:hover { transform: translateY(-10px); }
        .feature-icon { font-size: 2.5rem; color: var(--primary); margin-bottom: 20px; }
        .feature-card h3 { margin-bottom: 10px; color: var(--secondary); }

        /* --- 5. CATALOG & BOOKS --- */
        .search-wrapper { display: flex; gap: 10px; margin-bottom: 40px; }
        .search-input { flex: 1; padding: 15px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 1rem; outline: none; }
        .search-input:focus { border-color: var(--primary); }

        .book-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 30px; }
        .book-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: var(--shadow); position: relative; }
        .book-img { height: 250px; background: #cbd5e1; display: flex; align-items: center; justify-content: center; font-size: 3rem; color: white; position: relative; }
        .book-overlay { position: absolute; bottom: 0; left: 0; width: 100%; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); padding: 20px; color: white; }
        .book-body { padding: 20px; }
        .book-title { font-weight: 700; font-size: 1.1rem; margin-bottom: 5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .book-meta { font-size: 0.9rem; color: #64748b; margin-bottom: 15px; display: flex; justify-content: space-between; }
        .badge { padding: 4px 10px; border-radius: 4px; font-size: 0.8rem; font-weight: bold; }
        .badge-avail { background: #dcfce7; color: #166534; }
        .badge-out { background: #fee2e2; color: #991b1b; }

        .btn-block { width: 100%; padding: 12px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; transition: 0.2s; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); }
        .btn-disabled { background: #e2e8f0; color: #94a3b8; cursor: not-allowed; }

        /* --- 6. AUTH PAGES (LOGIN/SIGNUP) --- */
        .auth-container { max-width: 450px; margin: 60px auto; background: white; padding: 40px; border-radius: 16px; box-shadow: var(--shadow); text-align: center; }
        .auth-header h2 { font-size: 2rem; color: var(--secondary); margin-bottom: 10px; }
        .auth-header p { color: var(--text-light); margin-bottom: 30px; }
        
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 8px; color: var(--secondary); }
        .form-control { width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; transition: 0.3s; }
        .form-control:focus { border-color: var(--primary); }
        
        .auth-switch { margin-top: 20px; font-size: 0.95rem; }
        .auth-switch span { color: var(--primary); font-weight: 600; cursor: pointer; text-decoration: underline; }

        /* --- 7. ADMIN & DASHBOARD TABLES --- */
        .table-responsive { overflow-x: auto; background: white; border-radius: 12px; box-shadow: var(--shadow); }
        table { width: 100%; border-collapse: collapse; min-width: 600px; }
        th { background: #f1f5f9; padding: 15px; text-align: left; font-weight: 600; color: var(--secondary); }
        td { padding: 15px; border-bottom: 1px solid #f1f5f9; }
        tr:last-child td { border-bottom: none; }

        /* --- 8. BIGGER FOOTER --- */
        footer { background: var(--secondary); color: white; padding: 80px 0 30px; margin-top: auto; }
        .footer-grid {
            max-width: 1200px; margin: 0 auto; padding: 0 20px;
            display: grid; grid-template-columns: 1.5fr 1fr 1fr 1.2fr; gap: 40px;
        }
        .footer-col h3 { font-size: 1.2rem; color: white; margin-bottom: 25px; position: relative; display: inline-block; }
        .footer-col h3::after { content: ''; position: absolute; left: 0; bottom: -8px; width: 40px; height: 3px; background: var(--accent); }
        .footer-col p { color: #94a3b8; line-height: 1.6; margin-bottom: 20px; }
        
        .footer-links li { margin-bottom: 12px; }
        .footer-links a { color: #cbd5e1; transition: 0.3s; }
        .footer-links a:hover { color: var(--accent); padding-left: 5px; }

        .social-links { display: flex; gap: 15px; }
        .social-btn { width: 40px; height: 40px; background: rgba(255,255,255,0.1); display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: 0.3s; }
        .social-btn:hover { background: var(--primary); }

        .newsletter-form { display: flex; margin-top: 15px; }
        .newsletter-form input { flex: 1; padding: 12px; border: none; border-radius: 6px 0 0 6px; outline: none; }
        .newsletter-form button { padding: 12px 20px; background: var(--primary); border: none; color: white; border-radius: 0 6px 6px 0; cursor: pointer; }

        .footer-bottom { border-top: 1px solid rgba(255,255,255,0.1); margin-top: 60px; padding-top: 20px; text-align: center; color: #64748b; }

        /* --- 9. MOBILE RESPONSIVE --- */
        @media (max-width: 768px) {
            .mobile-toggle { display: block; }
            .nav-menu {
                display: none; flex-direction: column; position: absolute;
                top: 70px; left: 0; width: 100%; background: white;
                padding: 20px; box-shadow: 0 10px 10px rgba(0,0,0,0.1);
            }
            .nav-menu.show { display: flex; }
            .hero h1 { font-size: 2.5rem; }
            .footer-grid { grid-template-columns: 1fr; gap: 30px; }
        }
    </style>
</head>
<body>

    <header>
        <div class="nav-container">
            <div class="logo">
                <i class="fas fa-book-reader"></i> Athena Library
            </div>
            <div class="mobile-toggle" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </div>
            <ul class="nav-menu" id="nav-menu">
                <li><a onclick="route('home')" class="nav-link active">Home</a></li>
                <li><a onclick="route('catalog')" class="nav-link">Books Catalog</a></li>
                <li><a onclick="route('admin')" class="nav-link">Admin Panel</a></li>
                <li id="nav-login-btn"><a onclick="route('login')" class="btn-auth">Login / Join</a></li>
                <li id="nav-user-profile" style="display:none;">
                    <a onclick="route('dashboard')" class="nav-link"><i class="fas fa-user-circle"></i> My Books</a>
                    <a onclick="logout()" style="color:var(--text-light); font-size:0.9rem; margin-left:10px; cursor:pointer;">(Logout)</a>
                </li>
            </ul>
        </div>
    </header>

    <main>
        
        <section id="home" class="page-section active">
            <div class="hero">
                <h1>Unlock the World<br>of Knowledge</h1>
                <p>Access thousands of books, journals, and digital resources. Join the Athena community today and start your journey.</p>
                <button onclick="route('catalog')" class="btn-auth" style="font-size: 1.1rem; padding: 15px 40px;">Browse Library</button>
            </div>

            <div class="container">
                <div class="features-grid">
                    <div class="feature-card">
                        <i class="fas fa-bolt feature-icon"></i>
                        <h3>Instant Access</h3>
                        <p>No waiting lines. Search, click, and reserve your favorite books instantly.</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-mobile-alt feature-icon"></i>
                        <h3>Mobile Friendly</h3>
                        <p>Manage your account, renew books, and track due dates from any device.</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-users feature-icon"></i>
                        <h3>Community Events</h3>
                        <p>Join book clubs, author meetups, and educational workshops every month.</p>
                    </div>
                </div>

                <div style="margin-top: 80px; text-align: center;">
                    <h2 style="font-size: 2.5rem; color: var(--secondary); margin-bottom: 10px;">Trusted by Readers</h2>
                    <p style="color: var(--text-light); margin-bottom: 50px;">We are more than just shelves of books.</p>
                    
                    <div style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center;">
                        <div style="background: white; padding: 20px; width: 300px; border-radius: 8px; box-shadow: var(--shadow);">
                            <div style="color: var(--accent); margin-bottom: 10px;">
                                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                            </div>
                            <p>"The best library system I've ever used. Finding books is so easy!"</p>
                            <h4 style="margin-top: 15px;">- Sarah J.</h4>
                        </div>
                        <div style="background: white; padding: 20px; width: 300px; border-radius: 8px; box-shadow: var(--shadow);">
                            <div style="color: var(--accent); margin-bottom: 10px;">
                                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                            </div>
                            <p>"I love the dashboard feature. Keeps me organized with my due dates."</p>
                            <h4 style="margin-top: 15px;">- Mike T.</h4>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="login" class="page-section">
            <div class="auth-container">
                <div class="auth-header">
                    <h2>Welcome Back</h2>
                    <p>Login to access your dashboard</p>
                </div>
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" class="form-control" placeholder="user@example.com" required value="user@demo.com">
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" class="form-control" placeholder="••••••••" required value="password">
                    </div>
                    <button type="submit" class="btn-block btn-primary">Sign In</button>
                </form>
                <div class="auth-switch">
                    Don't have an account? <span onclick="route('signup')">Create Account</span>
                </div>
            </div>
        </section>

        <section id="signup" class="page-section">
            <div class="auth-container">
                <div class="auth-header">
                    <h2>Create Account</h2>
                    <p>Join Athena Library for free</p>
                </div>
                <form onsubmit="handleSignup(event)">
                    <div class="form-group">
                        <label>Full Name</label>
                        <input type="text" class="form-control" placeholder="John Doe" required>
                    </div>
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" class="form-control" placeholder="user@example.com" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" class="form-control" placeholder="Create a password" required>
                    </div>
                    <button type="submit" class="btn-block btn-primary">Create Account</button>
                </form>
                <div class="auth-switch">
                    Already have an account? <span onclick="route('login')">Login here</span>
                </div>
            </div>
        </section>

        <section id="catalog" class="page-section">
            <div class="container">
                <div style="text-align: center; margin-bottom: 40px;">
                    <h2 style="font-size: 2.5rem; color: var(--secondary);">Library Catalog</h2>
                    <p style="color: var(--text-light);">Browse our collection of premium books</p>
                </div>

                <div class="search-wrapper">
                    <input type="text" id="searchInput" class="search-input" placeholder="Search by book title or author..." onkeyup="filterBooks()">
                    <button class="btn-auth" style="border-radius: 8px;"><i class="fas fa-search"></i></button>
                </div>

                <div id="book-grid" class="book-grid">
                    </div>
            </div>
        </section>

        <section id="dashboard" class="page-section">
            <div class="container">
                <h2 style="margin-bottom: 30px; border-left: 5px solid var(--primary); padding-left: 15px;">My Borrowed Books</h2>
                <div class="table-responsive">
                    <table>
                        <thead>
                            <tr>
                                <th>Book Details</th>
                                <th>Borrow Date</th>
                                <th>Due Date</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="borrowed-list">
                            </tbody>
                    </table>
                    <div id="empty-dashboard" style="text-align: center; padding: 40px; color: #94a3b8; display: none;">
                        <i class="fas fa-book-open" style="font-size: 3rem; margin-bottom: 10px;"></i>
                        <p>You haven't borrowed any books yet.</p>
                        <button onclick="route('catalog')" class="btn-auth" style="margin-top: 15px;">Browse Catalog</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="admin" class="page-section">
            <div class="container">
                <div style="background: white; padding: 40px; border-radius: 12px; box-shadow: var(--shadow); max-width: 600px; margin: 0 auto;">
                    <h2 style="margin-bottom: 20px;"><i class="fas fa-plus-circle" style="color: var(--primary);"></i> Add New Book</h2>
                    <form onsubmit="addBook(event)">
                        <div class="form-group">
                            <label>Book Title</label>
                            <input type="text" id="newTitle" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Author Name</label>
                            <input type="text" id="newAuthor" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label>Category</label>
                            <select id="newCategory" class="form-control">
                                <option>Fiction</option>
                                <option>Science</option>
                                <option>Technology</option>
                                <option>History</option>
                            </select>
                        </div>
                        <button type="submit" class="btn-block btn-primary">Add to Library</button>
                    </form>
                </div>
            </div>
        </section>

    </main>

    <footer>
        <div class="footer-grid">
            <div class="footer-col">
                <h3>Athena Library</h3>
                <p>Empowering minds through accessible knowledge. We are dedicated to providing the best reading resources to our community.</p>
                <div class="social-links">
                    <a href="#" class="social-btn"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-btn"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-btn"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-btn"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>

            <div class="footer-col">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#" onclick="route('home')">Home</a></li>
                    <li><a href="#" onclick="route('catalog')">Books Catalog</a></li>
                    <li><a href="#" onclick="route('login')">Member Login</a></li>
                    <li><a href="#">About Us</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Contact Info</h3>
                <ul class="footer-links">
                    <li><i class="fas fa-map-marker-alt" style="color:var(--accent); width:20px;"></i> 123 Library St, New York</li>
                    <li><i class="fas fa-phone" style="color:var(--accent); width:20px;"></i> +1 (555) 123-4567</li>
                    <li><i class="fas fa-envelope" style="color:var(--accent); width:20px;"></i> support@athena.lib</li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Newsletter</h3>
                <p>Subscribe to get updates on new arrivals and events.</p>
                <form class="newsletter-form">
                    <input type="email" placeholder="Your email address">
                    <button><i class="fas fa-paper-plane"></i></button>
                </form>
            </div>
        </div>

        <div class="footer-bottom">
            <p>&copy; 2024 Athena Library Management System. Designed with <i class="fas fa-heart" style="color:red;"></i> by Developer.</p>
        </div>
    </footer>

    <script>
        // --- DATA STATE ---
        const defaultBooks = [
            { id: 1, title: "The Great Gatsby", author: "F. Scott Fitzgerald", category: "Fiction", borrowed: false },
            { id: 2, title: "Clean Code", author: "Robert C. Martin", category: "Tech", borrowed: false },
            { id: 3, title: "Sapiens", author: "Yuval Noah Harari", category: "History", borrowed: false },
            { id: 4, title: "Dune", author: "Frank Herbert", category: "Fiction", borrowed: false },
            { id: 5, title: "Atomic Habits", author: "James Clear", category: "Self-Help", borrowed: false },
            { id: 6, title: "Thinking, Fast and Slow", author: "Daniel Kahneman", category: "Psychology", borrowed: false }
        ];

        // Load data from LocalStorage or use defaults
        let books = JSON.parse(localStorage.getItem('athena_books')) || defaultBooks;
        let myBooks = JSON.parse(localStorage.getItem('athena_mybooks')) || [];
        let isLoggedIn = localStorage.getItem('athena_logged_in') === 'true';

        // --- NAVIGATION LOGIC ---
        function route(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-section').forEach(sec => sec.classList.remove('active'));
            // Remove active nav state
            document.querySelectorAll('.nav-link').forEach(link => link.classList.remove('active'));
            
            // Show requested page
            const target = document.getElementById(pageId);
            if(target) target.classList.add('active');
            
            // Close mobile menu if open
            document.getElementById('nav-menu').classList.remove('show');
            
            // Specific page refresh logic
            if(pageId === 'catalog') renderCatalog();
            if(pageId === 'dashboard') renderDashboard();
            
            // Scroll to top
            window.scrollTo(0, 0);
        }

        function toggleMenu() {
            document.getElementById('nav-menu').classList.toggle('show');
        }

        // --- AUTH LOGIC ---
        function updateNav() {
            if(isLoggedIn) {
                document.getElementById('nav-login-btn').style.display = 'none';
                document.getElementById('nav-user-profile').style.display = 'block';
            } else {
                document.getElementById('nav-login-btn').style.display = 'block';
                document.getElementById('nav-user-profile').style.display = 'none';
            }
        }

        function handleLogin(e) {
            e.preventDefault();
            isLoggedIn = true;
            localStorage.setItem('athena_logged_in', 'true');
            alert("Login Successful! Welcome back.");
            updateNav();
            route('home');
        }

        function handleSignup(e) {
            e.preventDefault();
            alert("Account created! Please login.");
            route('login');
        }

        function logout() {
            isLoggedIn = false;
            localStorage.setItem('athena_logged_in', 'false');
            updateNav();
            route('home');
        }

        // --- CATALOG & BOOKS ---
        function renderCatalog(filter = "") {
            const grid = document.getElementById('book-grid');
            grid.innerHTML = "";
            
            const filteredBooks = books.filter(b => 
                b.title.toLowerCase().includes(filter.toLowerCase()) || 
                b.author.toLowerCase().includes(filter.toLowerCase())
            );

            filteredBooks.forEach(book => {
                // Determine visuals
                const badge = book.borrowed 
                    ? `<span class="badge badge-out">Unavailable</span>` 
                    : `<span class="badge badge-avail">Available</span>`;
                
                const btnState = book.borrowed 
                    ? `<button class="btn-block btn-disabled" disabled>Borrowed</button>` 
                    : `<button class="btn-block btn-primary" onclick="borrowBook(${book.id})">Borrow Now</button>`;

                const card = document.createElement('div');
                card.className = 'book-card';
                card.innerHTML = `
                    <div class="book-img">
                        <i class="fas fa-book"></i>
                        <div class="book-overlay">${book.category}</div>
                    </div>
                    <div class="book-body">
                        <div class="book-title" title="${book.title}">${book.title}</div>
                        <div class="book-meta">
                            <span>${book.author}</span>
                            ${badge}
                        </div>
                        ${btnState}
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        function filterBooks() {
            const query = document.getElementById('searchInput').value;
            renderCatalog(query);
        }

        function borrowBook(id) {
            if(!isLoggedIn) {
                alert("Please Login to borrow books.");
                route('login');
                return;
            }

            const bookIndex = books.findIndex(b => b.id === id);
            if(bookIndex > -1) {
                // Update Global State
                books[bookIndex].borrowed = true;
                localStorage.setItem('athena_books', JSON.stringify(books));

                // Add to My Books
                const today = new Date().toISOString().split('T')[0];
                myBooks.push({ ...books[bookIndex], date: today });
                localStorage.setItem('athena_mybooks', JSON.stringify(myBooks));

                alert(`You have borrowed: ${books[bookIndex].title}`);
                renderCatalog();
            }
        }

        // --- DASHBOARD ---
        function renderDashboard() {
            const tbody = document.getElementById('borrowed-list');
            const emptyMsg = document.getElementById('empty-dashboard');
            tbody.innerHTML = "";

            if(myBooks.length === 0) {
                emptyMsg.style.display = 'block';
                document.querySelector('table').style.display = 'none';
                return;
            }

            emptyMsg.style.display = 'none';
            document.querySelector('table').style.display = 'table';

            myBooks.forEach(book => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>
                        <strong>${book.title}</strong><br>
                        <small style="color:#64748b">${book.author}</small>
                    </td>
                    <td>${book.date}</td>
                    <td style="color:var(--accent);">Due in 14 days</td>
                    <td><span class="badge badge-out">Active</span></td>
                    <td><button class="btn-auth" style="padding:5px 15px; font-size:0.8rem; background:var(--secondary);" onclick="returnBook(${book.id})">Return</button></td>
                `;
                tbody.appendChild(tr);
            });
        }

        function returnBook(id) {
            // Remove from My Books
            myBooks = myBooks.filter(b => b.id !== id);
            localStorage.setItem('athena_mybooks', JSON.stringify(myBooks));

            // Set Global Book status to available
            const bookIndex = books.findIndex(b => b.id === id);
            if(bookIndex > -1) {
                books[bookIndex].borrowed = false;
                localStorage.setItem('athena_books', JSON.stringify(books));
            }

            renderDashboard();
        }

        // --- ADMIN ---
        function addBook(e) {
            e.preventDefault();
            const title = document.getElementById('newTitle').value;
            const author = document.getElementById('newAuthor').value;
            const cat = document.getElementById('newCategory').value;

            const newBook = {
                id: Date.now(),
                title: title,
                author: author,
                category: cat,
                borrowed: false
            };

            books.push(newBook);
            localStorage.setItem('athena_books', JSON.stringify(books));
            
            alert("Book Added Successfully!");
            e.target.reset();
            route('catalog');
        }

        // --- INIT ---
        updateNav();
        renderCatalog();

    </script>
</body>
</html>